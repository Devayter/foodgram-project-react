![Workflow status](https://github.com/Devayter/foodgram-project-react/actions/workflows/main.yml/badge.svg)
# Фудграм
https://foodgramforyou.ddns.net

## Стек технологий в проекте

* Django
* Django REST Framework
* PostgreSQL
* Python
* React

## Описание проекта

«Фудграм» — сайт, на котором пользователи могут публиковать рецепты, добавлять чужие рецепты в избранное и подписываться на публикации других авторов.

##### Страницы сайта:
***Главная*** — список первых шести рецептов, отсортированных по дате публикации «от новых к старым». Реализована постраничная пагинация, есть возможность поиска и фильтрации по различным параметрам.

***Страница рецепта*** - полное описание рецепта. У авторизованных пользователей есть возможность рецепт в избранное и в список покупок, а также подписаться на автора рецепта.

***Страница пользователя*** - имя пользователя, все рецепты, опубликованные пользователем и возможность подписаться на пользователя.

***Страница подписок*** - здесь отображаются рецепты всех авторов, на которых подписался пользователь.

***Избранное*** - рецепты, которые ранее были добавлены пользователем в избранное.

***Список покупок*** - рецепты, которые ранее были добавлены пользователем в список покупок. Есть возможность сформировать и скачать список необходимых ингредиентов для приготовления данных рецептов.

## Запуск проекта

Клонировать репозиторий и перейти в него в командной строке:
```
git clone git@github.com:Devayter/foodgram-project-react.git
```
```
cd foodgram-project-react/backend
```
 Cоздать и активировать виртуальное окружение
```
python -m venv venv # Для Windows
```
```
python3 -m venv venv # Для Linux и macOS
```
```
source venv/Scripts/activate # Для Windows
```
```
source venv/bin/activate # Для Linux и macOS
```
 Установите зависимости из файла requirements.txt
```
pip install -r requirements.txt
```
Выполнить миграции
```
python manage.py migrate
```
Запустить проект
```
python manage.py runserver
```
## Техническое описание проекта YaMDb

### Ресурсы API Фудграм

* Ресурс **auth**: аутентификация

* Ресурс **favorite**: избранное

* Ресурс **ingredients**: ингредиенты

* Ресурс **recipes**: рецепты

* Ресурс **tags**: тэги 

* Ресурс **subscriptions**: подписки

* Ресурс **shopping_cart**: список покупок

* Ресурс **users**: пользователи и регистрация


### Пользовательские роли и права доступа

* **Аноним** — просмотр главной страницы, отдельных рецептов, страниц пользователя и создание аккаунта.

* **Аутентифицированный пользователь** (`user`) — вход/выход из аккаунта. Создание, редактирование и удаление собственных рецептов. Просмотр страниц пользователей, просмотр отдельных страниц рецептов, просмотр рецептов на главной, фильтрация рецептов по тегам.
Работа с персональным списком покупок: добавление и удаление любых рецептов, выгрузка файла сколичеством необходимых ингредиентов для рецептов из списка покупок. Работа сперсональным списком избранного: добавление в него рецептов или удаление их, просмотр своей страницы избранных рецептов. Подписка на публикации авторов рецептов иотмена подписки, просмотр своей страницы подписок

* **Администратор** (`admin`) — Все права авторизованного пользователя. Изменение пароля любого пользователя. Создание, блокировка иудаление аккаунтов пользователей. Изменение пароля любого пользователя. Добавление, удаление и редактирование ингредиентов. Добавление, удаление иредактирование тегов


### Создание суперпользователя

* В директории с файлом manage.py выполнить команду
```
python manage.py createsuperuser
```
* Заполнить поля в терминале

  * Username: <ваше_имя>
  * Email address: <ваш_email>
  * Password: <ваш_пароль>
  * Password (again): <ваш_пароль>
  
### Самостоятельная регистрация новых пользователей

1. Для регистрации пользователь отправляет POST-запрос с параметрами `email`, `username`, `first_name`, `last_name` и `password` на эндпоинт на эндпоинт `/api/users/`.

2. Для входа и получения токена ользователь отправляет POST-запрос с параметрами `email` и `password`на эндпоинт `/api/auth/token/login/`, в ответе на запрос ему приходит `token` (JWT-токен).

3. Для выхода из аккаунта и удаления токена необходимо отправить POAT-запрос на эндпоинт `/api/auth/token/logout/`

В результате пользователь получает токен и может работать с API проекта, отправляя этот токен с каждым запросом. 


### Примеры запросов

* **Пример запроса на создание рецепта:**
#### POST
```
http://127.0.0.1:8000/api/recipes/
```

{
  "ingredients": [
    {
      "id": 1123,
      "amount": 10
    }
  ],
  "tags": [
    1,
    2
  ],
  "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAgMAAABieywaAAAACVBMVEUAAAD///9fX1/S0ecCAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNoAAAAggCByxOyYQAAAABJRU5ErkJggg==",
  "name": "string",
  "text": "string",
  "cooking_time": 1
}

  * Пример ответа:

{
  "id": 0,
  "tags": [
    {
      "id": 0,
      "name": "Завтрак",
      "color": "#E26C2D",
      "slug": "breakfast"
    }
  ],
  "author": {
    "email": "user@example.com",
    "id": 0,
    "username": "-kp2irAG79GE1vlMcgp+YF@MoqwiDAXDA4E4l@zEgO+qAQRyT3cFKcD3BtXHTcOsCN6cFtBZEk2E0z",
    "first_name": "Вася",
    "last_name": "Пупкин",
    "is_subscribed": false
  },
  "ingredients": [
    {
      "id": 0,
      "name": "Картофель отварной",
      "measurement_unit": "г",
      "amount": 1
    }
  ],
  "is_favorited": true,
  "is_in_shopping_cart": true,
  "name": "string",
  "image": "http://foodgram.example.org/media/recipes/images/image.jpeg",
  "text": "string",
  "cooking_time": 1
}

* **Пример запроса на добавление пецепта в список покупок:**
#### POST
```
 http://127.0.0.1:8000/api/recipes/{id}/shopping_cart/
```

  * Пример ответа:

{
  "id": 0,
  "name": "string",
  "image": "http://foodgram.example.org/media/recipes/images/image.jpeg",
  "cooking_time": 1
}

## Полная документация к API проекта:

Перечень запросов к ресурсу можно посмотреть в описании API

http://127.0.0.1:8000/redoc/

## Авторы

* Павел Рябов

